(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Kindergarten=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var _perimeter=require("./kindergarten/perimeter");var _perimeter2=_interopRequireDefault(_perimeter);var _sandbox=require("./kindergarten/sandbox");var _sandbox2=_interopRequireDefault(_sandbox);var _headGoverness=require("./kindergarten/governesses/head-governess");var _headGoverness2=_interopRequireDefault(_headGoverness);var _easyGoverness=require("./kindergarten/governesses/easy-governess");var _easyGoverness2=_interopRequireDefault(_easyGoverness);var _strictGoverness=require("./kindergarten/governesses/strict-governess");var _strictGoverness2=_interopRequireDefault(_strictGoverness);var _germanGoverness=require("./kindergarten/governesses/german-governess");var _germanGoverness2=_interopRequireDefault(_germanGoverness);var _rule=require("./kindergarten/rule");var _rule2=_interopRequireDefault(_rule);var _purpose=require("./kindergarten/purpose");var _purpose2=_interopRequireDefault(_purpose);var _logger=require("./kindergarten/logger");var _logger2=_interopRequireDefault(_logger);var _version=require("./kindergarten/version");var _version2=_interopRequireDefault(_version);var _errors=require("./kindergarten/errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var Kindergarten={Perimeter:_perimeter2.default,Sandbox:_sandbox2.default,HeadGoverness:_headGoverness2.default,EasyGoverness:_easyGoverness2.default,StrictGoverness:_strictGoverness2.default,GermanGoverness:_germanGoverness2.default,Rule:_rule2.default,Purpose:_purpose2.default,Logger:_logger2.default,VERSION:_version2.default,AccessDenied:_errors.AccessDenied,ArgumentError:_errors.ArgumentError,NoExposedMethodError:_errors.NoExposedMethodError,NoPurposeError:_errors.NoPurposeError,NoSanboxError:_errors.NoSanboxError,RestrictedMethodError:_errors.RestrictedMethodError,WrongRuleDefinition:_errors.WrongRuleDefinition,sandbox:function sandbox(child){return new Kindergarten.Sandbox(child)}};module.exports=Kindergarten},{"./kindergarten/errors":3,"./kindergarten/governesses/easy-governess":4,"./kindergarten/governesses/german-governess":5,"./kindergarten/governesses/head-governess":6,"./kindergarten/governesses/strict-governess":7,"./kindergarten/logger":8,"./kindergarten/perimeter":9,"./kindergarten/purpose":10,"./kindergarten/rule":11,"./kindergarten/sandbox":14,"./kindergarten/version":18}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _pubSub=require("./utils/pub-sub");var _pubSub2=_interopRequireDefault(_pubSub);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var BaseObject=function(_PubSub){_inherits(BaseObject,_PubSub);function BaseObject(){_classCallCheck(this,BaseObject);return _possibleConstructorReturn(this,Object.getPrototypeOf(BaseObject).apply(this,arguments))}return BaseObject}(_pubSub2.default);exports.default=BaseObject},{"./utils/pub-sub":16}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AccessDenied=AccessDenied;exports.ArgumentError=ArgumentError;exports.NoExposedMethodError=NoExposedMethodError;exports.NoPurposeError=NoPurposeError;exports.NoSanboxError=NoSanboxError;exports.RestrictedMethodError=RestrictedMethodError;exports.WrongRuleDefinition=WrongRuleDefinition;function AccessDenied(message){this.name="AccessDenied";this.message=message}AccessDenied.prototype=new Error;function ArgumentError(message){this.name="ArgumentError";this.message=message}ArgumentError.prototype=new Error;function NoExposedMethodError(message){this.name="NoExposedMethodError";this.message=message}NoExposedMethodError.prototype=new Error;function NoPurposeError(message){this.name="NoPurposeError";this.message=message||"Perimeter must have a purpose."}NoPurposeError.prototype=new Error;function NoSanboxError(message){this.name="NoSanboxError";this.message=message||"Perimeter must be imported into a sandbox."}NoSanboxError.prototype=new Error;function RestrictedMethodError(message){this.name="RestrictedMethodError";this.message=message}RestrictedMethodError.prototype=new Error;function WrongRuleDefinition(message){this.name="WrongRuleDefinition";this.message=message}WrongRuleDefinition.prototype=new Error},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _headGoverness=require("./head-governess");var _headGoverness2=_interopRequireDefault(_headGoverness);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var EasyGoverness=function(_HeadGoverness){_inherits(EasyGoverness,_HeadGoverness);function EasyGoverness(child){_classCallCheck(this,EasyGoverness);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(EasyGoverness).call(this,child));_this.unguarded=true;return _this}return EasyGoverness}(_headGoverness2.default);exports.default=EasyGoverness},{"./head-governess":6}],5:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _isObject=require("lodash/isObject");var _isObject2=_interopRequireDefault(_isObject);var _each=require("lodash/each");var _each2=_interopRequireDefault(_each);var _perimeter=require("../perimeter");var _perimeter2=_interopRequireDefault(_perimeter);var _headGoverness=require("./head-governess");var _headGoverness2=_interopRequireDefault(_headGoverness);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GermanGoverness=function(_HeadGoverness){_inherits(GermanGoverness,_HeadGoverness);function GermanGoverness(){var _Object$getPrototypeO;_classCallCheck(this,GermanGoverness);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _possibleConstructorReturn(this,(_Object$getPrototypeO=Object.getPrototypeOf(GermanGoverness)).call.apply(_Object$getPrototypeO,[this].concat(args)))}_createClass(GermanGoverness,[{key:"governed",value:function governed(callback){var args=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];var callingContext=arguments.length<=2||arguments[2]===undefined?null:arguments[2];var guardArgs=args;var exposedMethodName=this._detectNameOfExposedMethod(callingContext,callback);guardArgs.unshift(exposedMethodName);this.guard.apply(this,guardArgs);return _headGoverness2.default.prototype.governed.apply(this,arguments)}},{key:"_detectNameOfExposedMethod",value:function _detectNameOfExposedMethod(source,method){if((0,_isObject2.default)(source)&&source instanceof _perimeter2.default){var methodName=undefined;(0,_each2.default)(source.expose,function(m){if(source[m]===method){methodName=m;return}});return methodName}throw new Error("German governess can only be used within sandbox.")}}]);return GermanGoverness}(_headGoverness2.default);exports.default=GermanGoverness},{"../perimeter":9,"./head-governess":6,"lodash/each":111,"lodash/isObject":129}],6:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _isFunction=require("lodash/isFunction");var _isFunction2=_interopRequireDefault(_isFunction);var _isEmpty2=require("lodash/isEmpty");var _isEmpty3=_interopRequireDefault(_isEmpty2);var _some=require("lodash/some");var _some2=_interopRequireDefault(_some);var _filter=require("lodash/filter");var _filter2=_interopRequireDefault(_filter);var _each=require("lodash/each");var _each2=_interopRequireDefault(_each);var _rule=require("../rule");var _rule2=_interopRequireDefault(_rule);var _baseObject=require("../base-object");var _baseObject2=_interopRequireDefault(_baseObject);var _errors=require("../errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var HeadGoverness=function(_BaseObject){_inherits(HeadGoverness,_BaseObject);function HeadGoverness(child){_classCallCheck(this,HeadGoverness);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(HeadGoverness).call(this));_this.child=child;_this.rules=[];return _this}_createClass(HeadGoverness,[{key:"guard",value:function guard(action){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var target=args[0];if(this.isAllowed.apply(this,[action].concat(args))){return target}throw new _errors.AccessDenied("Child is not allowed to "+action+" the target.")}},{key:"governed",value:function governed(callback){var args=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];var callingContext=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return callback.apply(callingContext,args)}},{key:"isAllowed",value:function isAllowed(action){var _this2=this;for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}if(this.isGuarded()){var hasAllowRule=(0,_some2.default)(this.getRules(action),function(rule){return _this2.isRule(rule)&&rule.type.isPositive&&rule.verify.apply(rule,args)});var hasStrictDisallowRule=(0,_some2.default)(this.getRules(action),function(rule){return _this2.isRule(rule)&&!rule.verify.apply(rule,args)&&rule.definition.isStrict});if(!hasAllowRule||hasStrictDisallowRule){return false}}return true}},{key:"isNotAllowed",value:function isNotAllowed(){return!this.isAllowed.apply(this,arguments)}},{key:"isRule",value:function isRule(rule){var res=false;try{res=rule instanceof _rule2.default}catch(ignore){}return res}},{key:"getRules",value:function getRules(type){return(0,_filter2.default)(this.rules,function(rule){return rule.type.getType()===type})}},{key:"verify",value:function verify(action){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3]}(0,_each2.default)(this.getRules(action),function(rule){rule.verify.apply(rule,args)});return true}},{key:"learnRules",value:function learnRules(perimeter,governObj){var keys=0;for(var key in governObj){if(governObj.hasOwnProperty(key)){keys++;var ruleDef=governObj[key];ruleDef.ruleContext=ruleDef.ruleContext||perimeter;this.addRule(new _rule2.default(key,ruleDef))}}return keys}},{key:"addRule",value:function addRule(){var _this3=this;for(var _len4=arguments.length,rules=Array(_len4),_key4=0;_key4<_len4;_key4++){rules[_key4]=arguments[_key4]}(0,_each2.default)(rules,function(rule){if(!_this3.isRule(rule)){throw new _errors.ArgumentError("Governess cannot learn the rule. Does it inherit from Rule class?")}_this3.rules.push(rule)});return this.rules.length}},{key:"isEmpty",value:function isEmpty(){return(0,_isEmpty3.default)(this.rules)}},{key:"unguarded",value:function unguarded(callback,context){context=context||null;if((0,_isFunction2.default)(callback)){var before=this.unguarded;this.unguarded=true;callback.apply(context);this.unguarded=before}}},{key:"isUnguarded",value:function isUnguarded(){return!!this.unguarded}},{key:"isGuarded",value:function isGuarded(){return!this.isUnguarded()}},{key:"unguarded",get:function get(){return!!this._unguarded},set:function set(value){this._unguarded=!!value;return value}}]);return HeadGoverness}(_baseObject2.default);exports.default=HeadGoverness},{"../base-object":2,"../errors":3,"../rule":11,"lodash/each":111,"lodash/filter":114,"lodash/isEmpty":125,"lodash/isFunction":126,"lodash/some":142}],7:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _headGoverness=require("./head-governess");var _headGoverness2=_interopRequireDefault(_headGoverness);var _errors=require("../errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var StrictGoverness=function(_HeadGoverness){_inherits(StrictGoverness,_HeadGoverness);function StrictGoverness(child){_classCallCheck(this,StrictGoverness);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(StrictGoverness).call(this,child));_this._guardCount=0;_this._governedCount=0;return _this}_createClass(StrictGoverness,[{key:"governed",value:function governed(){var returnVal=_headGoverness2.default.prototype.governed.apply(this,arguments);if(++this._governedCount>this._guardCount&&!this.unguarded){throw new _errors.AccessDenied("All exposed methods must call guard method.")}return returnVal}},{key:"guard",value:function guard(){++this._guardCount;return _headGoverness2.default.prototype.guard.apply(this,arguments)}}]);return StrictGoverness}(_headGoverness2.default);exports.default=StrictGoverness},{"../errors":3,"./head-governess":6}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _isFunction=require("lodash/isFunction");var _isFunction2=_interopRequireDefault(_isFunction);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var Logger={_log:function _log(msg){if(console&&(0,_isFunction2.default)(console.log)){console.log(msg)}},log:function log(msg){Logger._log(msg)},warn:function warn(msg){Logger._log("WARN "+msg)}};exports.default=Logger},{"lodash/isFunction":126}],9:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _isString=require("lodash/isString");var _isString2=_interopRequireDefault(_isString);var _isArray=require("lodash/isArray");var _isArray2=_interopRequireDefault(_isArray);var _isObject=require("lodash/isObject");var _isObject2=_interopRequireDefault(_isObject);var _extend=require("lodash/extend");var _extend2=_interopRequireDefault(_extend);var _baseObject=require("./base-object");var _baseObject2=_interopRequireDefault(_baseObject);var _allowedMethodsService=require("./utils/allowed-methods-service");var _allowedMethodsService2=_interopRequireDefault(_allowedMethodsService);var _utils=require("./utils/utils");var _headGoverness=require("./governesses/head-governess");var _headGoverness2=_interopRequireDefault(_headGoverness);var _errors=require("./errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var allowedMethodsService=new _allowedMethodsService2.default({});var Perimeter=function(_BaseObject){_inherits(Perimeter,_BaseObject);function Perimeter(purpose){var opts=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_classCallCheck(this,Perimeter);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Perimeter).call(this));if((0,_isObject2.default)(purpose)&&(0,_isString2.default)(purpose.purpose)){opts=purpose;_this.purpose=purpose.purpose}_this.purpose=_this.purpose||purpose;_this.govern=opts.govern;_this.expose=opts.expose;if((0,_utils.isGoverness)(_this.governess)){_this.governess.learnRules(_this,_this.govern)}(0,_extend2.default)(_this,opts);return _this}_createClass(Perimeter,[{key:"guard",value:function guard(){var _governess$guard;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return(_governess$guard=this.governess.guard).call.apply(_governess$guard,[this.governess].concat(args))}},{key:"governed",value:function governed(){var _governess$governed;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return(_governess$governed=this.governess.governed).call.apply(_governess$governed,[this.governess].concat(args))}},{key:"isAllowed",value:function isAllowed(){var _governess$isAllowed;for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}return(_governess$isAllowed=this.governess.isAllowed).call.apply(_governess$isAllowed,[this.governess].concat(args))}},{key:"isNotAllowed",value:function isNotAllowed(){var _governess$isNotAllow;for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}return(_governess$isNotAllow=this.governess.isNotAllowed).call.apply(_governess$isNotAllow,[this.governess].concat(args))}},{key:"purpose",get:function get(){return this._purpose},set:function set(value){if(!(0,_isString2.default)(value)||allowedMethodsService.isRestricted(value)){throw new _errors.NoPurposeError}this._purpose=value;return value}},{key:"govern",get:function get(){return(0,_isObject2.default)(this._govern)?this._govern:{}},set:function set(value){this._govern=(0,_isObject2.default)(value)?value:{};return value}},{key:"expose",get:function get(){return(0,_isArray2.default)(this._expose)?this._expose:[]},set:function set(value){this._expose=(0,_isArray2.default)(value)?value:[];return value}},{key:"sandbox",get:function get(){return(0,_utils.isSandbox)(this._sandbox)?this._sandbox:null},set:function set(value){if(!(0,_utils.isSandbox)(value)){throw new _errors.NoSanboxError}this._sandbox=value;this.child=value.child;return value}},{key:"governess",get:function get(){var _this2=this;return(0,_utils.isGoverness)(this._governess)?this._governess:function(){return(0,_utils.isSandbox)(_this2.sandbox)?_this2.sandbox.governess:null}()},set:function set(value){var _this3=this;this._governess=(0,_isObject2.default)(value)&&value instanceof _headGoverness2.default?value:function(){return(0,_utils.isSandbox)(_this3.sandbox)?_this3.sandbox.governess:null}();if((0,_isObject2.default)(this._governess)&&this._governess instanceof _headGoverness2.default){this._governess.learnRules(this,this.govern)}return value}},{key:"child",get:function get(){return this._child||null},set:function set(child){this._child=child||null}}]);return Perimeter}(_baseObject2.default);exports.default=Perimeter},{"./base-object":2,"./errors":3,"./governesses/head-governess":6,"./utils/allowed-methods-service":15,"./utils/utils":17,"lodash/extend":113,"lodash/isArray":122,"lodash/isObject":129,"lodash/isString":132}],10:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _isFunction=require("lodash/isFunction");var _isFunction2=_interopRequireDefault(_isFunction);var _isObject=require("lodash/isObject");var _isObject2=_interopRequireDefault(_isObject);var _isString=require("lodash/isString");var _isString2=_interopRequireDefault(_isString);var _isEmpty=require("lodash/isEmpty");var _isEmpty2=_interopRequireDefault(_isEmpty);var _each=require("lodash/each");var _each2=_interopRequireDefault(_each);var _logger=require("./logger");var _pubSub=require("./utils/pub-sub");var _allowedMethodsService=require("./utils/allowed-methods-service");var _perimeter=require("./perimeter");var _utils=require("./utils/utils");var _errors=require("./errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Purpose=function(_PubSub){_inherits(Purpose,_PubSub);function Purpose(name,sandbox){_classCallCheck(this,Purpose);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Purpose).call(this));_this._name=name;_this._sandbox=sandbox;if(!(0,_isString2.default)(_this._name)){throw new _errors.ArgumentError("Name of the purpose must be a string")}if(!(0,_utils.isSandbox)(_this._sandbox)){throw new _errors.ArgumentError("Purpose requires sandbox to be given.")}return _this}_createClass(Purpose,[{key:"_addPerimeter",value:function _addPerimeter(perimeter){var _this2=this;if(!(0,_isObject2.default)(perimeter)||!(perimeter instanceof _perimeter.Perimeter)){throw new _errors.ArgumentError("Cannot add perimeter. Is it a perimeter?")}var exposedMethods=perimeter.expose;var allowedMethodsService=new _allowedMethodsService.AllowedMethodsService(this,false);if((0,_isEmpty2.default)(exposedMethods))return;(0,_each2.default)(exposedMethods,function(exposedMethod){if(allowedMethodsService.isRestricted(exposedMethod)){throw new _errors.RestrictedMethodError("Method name "+exposedMethods+" is restricted.")}else if((0,_isFunction2.default)(_this2[exposedMethod])){_logger.Logger.warn("Overriding already sandboxed method "+_this2._name+"."+exposedMethod+".")}if(!(0,_isFunction2.default)(perimeter[exposedMethod])){throw new _errors.NoExposedMethodError("The exposed method "+exposedMethod+" is not defined on perimeter "+perimeter.purpose)}_this2[exposedMethod]=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return perimeter.governed(perimeter[exposedMethod],args,perimeter)}})}},{key:"isAllowed",value:function isAllowed(){var perimeter=this._sandbox.getPerimeter(this._name);return perimeter.isAllowed.apply(perimeter,arguments)}},{key:"isNotAllowed",value:function isNotAllowed(){return!this.isAllowed.apply(this,arguments)}}]);return Purpose}(_pubSub.PubSub);exports.default=Purpose},{"./errors":3,"./logger":8,"./perimeter":9,"./utils/allowed-methods-service":15,"./utils/pub-sub":16,"./utils/utils":17,"lodash/each":111,"lodash/isEmpty":125,"lodash/isFunction":126,"lodash/isObject":129,"lodash/isString":132}],11:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _upperFirst=require("lodash/upperFirst");var _upperFirst2=_interopRequireDefault(_upperFirst);var _some=require("lodash/some");var _some2=_interopRequireDefault(_some);var _baseObject=require("./base-object");var _type=require("./rule/type");var _definition=require("./rule/definition");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Rule=function(_BaseObject){_inherits(Rule,_BaseObject);function Rule(str,def){_classCallCheck(this,Rule);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Rule).call(this));_this.type=new _type.Type(str);_this.definition=new _definition.Definition(_this,def);return _this}_createClass(Rule,[{key:"verify",value:function verify(){var verifyMethodName="_verify"+(0,_upperFirst2.default)(this.definition.type);
var result=this[verifyMethodName].apply(this,arguments);return this.type.isPositive()?result:!result}},{key:"_verifyItems",value:function _verifyItems(){var subject=arguments.length<=0?undefined:arguments[0];return(0,_some2.default)(this.definition.items,function(item){var isInstance=false;try{isInstance=subject instanceof item}catch(ignore){}return isInstance||item===subject})}},{key:"_verifyRegex",value:function _verifyRegex(){var subject=arguments.length<=0?undefined:arguments[0];return this.definition.regex.test(subject)}},{key:"_verifyCustomMethod",value:function _verifyCustomMethod(){var definition=this.definition;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return definition.customMethod.apply(definition.ruleContext,args)}}]);return Rule}(_baseObject.BaseObject);exports.default=Rule},{"./base-object":2,"./rule/definition":12,"./rule/type":13,"lodash/some":142,"lodash/upperFirst":147}],12:[function(require,module,exports){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Definition=undefined;var _isFunction=require("lodash/isFunction");var _isFunction2=_interopRequireDefault(_isFunction);var _isArray=require("lodash/isArray");var _isArray2=_interopRequireDefault(_isArray);var _isRegExp=require("lodash/isRegExp");var _isRegExp2=_interopRequireDefault(_isRegExp);var _isEmpty=require("lodash/isEmpty");var _isEmpty2=_interopRequireDefault(_isEmpty);var _find=require("lodash/find");var _find2=_interopRequireDefault(_find);var _baseObject=require("../base-object");var _memoize=require("lodash/memoize");var _memoize2=_interopRequireDefault(_memoize);var _errors=require("../errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TYPES=[["items",function(def){return(0,_isArray2.default)(def)&&!(0,_isEmpty2.default)(def)},false],["regex",function(def){return(0,_isRegExp2.default)(def)},true],["customMethod",function(def){return(0,_isFunction2.default)(def)},true]];var Definition=exports.Definition=function(_BaseObject){_inherits(Definition,_BaseObject);function Definition(rule,def){_classCallCheck(this,Definition);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Definition).call(this));_this._rule=rule;_this._raw=def;_this._resolve();return _this}_createClass(Definition,[{key:"getItems",value:function getItems(){return this.items}},{key:"setItems",value:function setItems(val){this.items=val;return val}},{key:"getRegex",value:function getRegex(){return this.regex}},{key:"setRegex",value:function setRegex(val){this.regex=val;return val}},{key:"getCustomMethod",value:function getCustomMethod(){return this.customMethod}},{key:"setCustomMethod",value:function setCustomMethod(val){this.customMethod=val;return val}},{key:"_resolve",value:function _resolve(){var _this2=this;var definitionObj=(0,_find2.default)(TYPES,function(type){var condition=type[1];return condition(_this2._raw)})||null;if(!(0,_isArray2.default)(definitionObj)){throw new _errors.WrongRuleDefinition('Cannot create a new rule "'+this._rule.type.type+'". Wrong rule definition.')}this.ruleContext=this._raw.ruleContext;var _definitionObj=_slicedToArray(definitionObj,1);this._type=_definitionObj[0];this[this._type]=this._raw}},{key:"isStrict",value:function isStrict(){return!this._rule.type.isPositive()||this._isStrict(this._type)}},{key:"isCustom",value:function isCustom(){return this._type==="customMethod"}},{key:"items",get:function get(){return this._condition("items")(this._items)?this._items:null},set:function set(val){this._items=this._condition("items")(val)?val:null;return val}},{key:"regex",get:function get(){return this._regex||null},set:function set(val){this._regex=this._condition("regex")(val)?val:null;return val}},{key:"customMethod",get:function get(){return this._customMethod||null},set:function set(val){this._customMethod=this._condition("customMethod")(val)?val:null;return val}},{key:"type",get:function get(){return this._type}}]);return Definition}(_baseObject.BaseObject);Definition.prototype._condition=(0,_memoize2.default)(function(type){return(0,_find2.default)(TYPES,function(t){return type===t[0]})[1]||function(){return false}});Definition.prototype._isStrict=(0,_memoize2.default)(function(type){return(0,_find2.default)(TYPES,function(t){return type===t[0]})[2]||function(){return false}()})},{"../base-object":2,"../errors":3,"lodash/find":115,"lodash/isArray":122,"lodash/isEmpty":125,"lodash/isFunction":126,"lodash/isRegExp":131,"lodash/memoize":139}],13:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Type=undefined;var _isArray=require("lodash/isArray");var _isArray2=_interopRequireDefault(_isArray);var _isString=require("lodash/isString");var _isString2=_interopRequireDefault(_isString);var _baseObject=require("../base-object");var _allowedMethodsService=require("../utils/allowed-methods-service");var _errors=require("../errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TYPE_REGEX=/^can(not)? ([a-z_$][a-zA-Z0-9_$]*)$/;var Type=exports.Type=function(_BaseObject){_inherits(Type,_BaseObject);function Type(str){_classCallCheck(this,Type);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Type).call(this));var match=(0,_isString2.default)(str)&&str.match(TYPE_REGEX);_this._type=function(){return(0,_isArray2.default)(match)?match[2]:undefined}();_this._str=str;_this._validate();_this._isPositive=!match[1];return _this}_createClass(Type,[{key:"_validate",value:function _validate(){var allowedMethodsService=new _allowedMethodsService.AllowedMethodsService;var type=this.getType();if(!(0,_isString2.default)(type)||allowedMethodsService.isRestricted(type)){throw new _errors.WrongRuleDefinition("Cannot create a rule "+this._str+". "+"The type of the rule cannot be parsed.")}return true}},{key:"isPositive",value:function isPositive(){return!!this._isPositive}},{key:"getType",value:function getType(){return this._type}}]);return Type}(_baseObject.BaseObject)},{"../base-object":2,"../errors":3,"../utils/allowed-methods-service":15,"lodash/isArray":122,"lodash/isString":132}],14:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _isString=require("lodash/isString");var _isString2=_interopRequireDefault(_isString);var _isObject=require("lodash/isObject");var _isObject2=_interopRequireDefault(_isObject);var _isUndefined=require("lodash/isUndefined");var _isUndefined2=_interopRequireDefault(_isUndefined);var _each=require("lodash/each");var _each2=_interopRequireDefault(_each);var _find=require("lodash/find");var _find2=_interopRequireDefault(_find);var _headGoverness=require("./governesses/head-governess");var _headGoverness2=_interopRequireDefault(_headGoverness);var _perimeter=require("./perimeter");var _perimeter2=_interopRequireDefault(_perimeter);var _purpose=require("./purpose");var _purpose2=_interopRequireDefault(_purpose);var _baseObject=require("./base-object");var _baseObject2=_interopRequireDefault(_baseObject);var _allowedMethodsService=require("./utils/allowed-methods-service");var _allowedMethodsService2=_interopRequireDefault(_allowedMethodsService);var _utils=require("./utils/utils");var _errors=require("./errors");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Sandbox=function(_BaseObject){_inherits(Sandbox,_BaseObject);function Sandbox(child){_classCallCheck(this,Sandbox);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Sandbox).call(this));_this.child=child;_this.governess=new _headGoverness2.default(child);_this._perimeters=[];_this.trigger("created",arguments);return _this}_createClass(Sandbox,[{key:"_learnRules",value:function _learnRules(){var _this2=this;(0,_each2.default)(this._perimeters||[],function(perimeter){_this2.governess.learnRules(perimeter)})}},{key:"loadPerimeter",value:function loadPerimeter(){var _this3=this;var counter=0;for(var _len=arguments.length,perimeters=Array(_len),_key=0;_key<_len;_key++){perimeters[_key]=arguments[_key]}(0,_each2.default)(perimeters,function(perimeter){if(!(0,_isObject2.default)(perimeter)||!(perimeter instanceof _perimeter2.default)){throw new _errors.ArgumentError("Module must be instance of Kindergarten.Perimeter.")}if(_this3.hasPerimeter(perimeter))return;++counter;if((0,_isObject2.default)(perimeter.governess)&&perimeter.governess instanceof _headGoverness2.default){perimeter.governess.learnRules(perimeter,perimeter.govern)}_this3.governess.learnRules(perimeter,perimeter.govern);perimeter.sandbox=_this3;_this3._perimeters.push(perimeter);_this3._extendPurpose(perimeter)});return counter}},{key:"loadModule",value:function loadModule(){return this.loadPerimeter.apply(this,arguments)}},{key:"_extendPurpose",value:function _extendPurpose(perimeter){var name=perimeter.purpose;var allowedMethodsService=new _allowedMethodsService2.default(this);if(!(0,_isString2.default)(name))throw new _errors.NoPurposeError;if(allowedMethodsService.isRestricted(name)){throw new _errors.RestrictedMethodError}this[name]=this[name]||new _purpose2.default(name,this);this[name]._addPerimeter(perimeter)}},{key:"hasPerimeter",value:function hasPerimeter(perimeter){return this._perimeters.some(function(p){return p.purpose===perimeter.purpose})}},{key:"getPerimeter",value:function getPerimeter(purpose){var perimeter=(0,_find2.default)(this._perimeters,function(p){return p.purpose===purpose});return(0,_isObject2.default)(perimeter)&&perimeter instanceof _perimeter2.default?perimeter:null}},{key:"isAllowed",value:function isAllowed(){var _governess;return(_governess=this.governess).isAllowed.apply(_governess,arguments)}},{key:"isNotAllowed",value:function isNotAllowed(){return!this.isAllowed.apply(this,arguments)}},{key:"child",get:function get(){var child=this._child;return(0,_isUndefined2.default)(child)?null:child},set:function set(value){this._child=(0,_isUndefined2.default)(value)?null:value;return value}},{key:"governess",get:function get(){var _this4=this;return(0,_utils.isGoverness)(this._governess)?this._governess:function(){_this4._learnRules();return new _headGoverness2.default(_this4.child)}()},set:function set(value){this._governess=(0,_utils.isGoverness)(value)?value:new _headGoverness2.default(this.child);this._learnRules();return value}}]);return Sandbox}(_baseObject2.default);exports.default=Sandbox},{"./base-object":2,"./errors":3,"./governesses/head-governess":6,"./perimeter":9,"./purpose":10,"./utils/allowed-methods-service":15,"./utils/utils":17,"lodash/each":111,"lodash/find":115,"lodash/isObject":129,"lodash/isString":132,"lodash/isUndefined":135}],15:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();Object.defineProperty(exports,"__esModule",{value:true});var _isString=require("lodash/isString");var _isString2=_interopRequireDefault(_isString);var _includes=require("lodash/includes");var _includes2=_interopRequireDefault(_includes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var METHOD_REGEX=/^[a-z_$][a-zA-Z0-9_$]*$/;var AllowedMethodsService=function(){function AllowedMethodsService(){var dummyObj=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var isStrict=arguments.length<=1||arguments[1]===undefined?true:arguments[1];_classCallCheck(this,AllowedMethodsService);this.dummyObj=dummyObj||{};this.isStrict=isStrict;this._initRestricted=this._restrictedMethods()}_createClass(AllowedMethodsService,[{key:"isRestricted",value:function isRestricted(methodName){return!(0,_isString2.default)(methodName)||!METHOD_REGEX.test(methodName)||(0,_includes2.default)(this.isStrict?this._restrictedMethods():this._initRestricted,methodName)||(0,_includes2.default)(this._customUnsafeList(),methodName)||(0,_includes2.default)(this._reservedWords(),methodName)}},{key:"_restrictedMethods",value:function _restrictedMethods(){var restricted=[];for(var prop in this.dummyObj){restricted.push(prop)}return restricted}},{key:"_reservedWords",value:function _reservedWords(){return["abstract","arguments","boolean","break","byte","case","catch","char","class","const","continue","debugger","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super*","switch","synchronized","this","throw","throws","transient","true","try","typeof","var","void","volatile","while","with","yield"]}},{key:"_customUnsafeList",value:function _customUnsafeList(){return["constructor","property","__proto__"]}}]);return AllowedMethodsService}();exports.default=AllowedMethodsService},{"lodash/includes":120,"lodash/isString":132}],16:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};Object.defineProperty(exports,"__esModule",{value:true});var _hookies=require("hookies");var _hookies2=_interopRequireDefault(_hookies);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PubSub=function(_Hookies$Hooks){_inherits(PubSub,_Hookies$Hooks);function PubSub(){_classCallCheck(this,PubSub);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(PubSub).call(this));_this.hookiesBase=_this;return _this}_createClass(PubSub,[{key:"trigger",value:function trigger(name){var _get2;for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}return(_get2=_get(Object.getPrototypeOf(PubSub.prototype),"trigger",this)).call.apply(_get2,[this,{name:name,sync:true,context:this}].concat(args))}},{key:"triggerAsync",value:function triggerAsync(){var _get3;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return(_get3=_get(Object.getPrototypeOf(PubSub.prototype),"trigger",this)).call.apply(_get3,[this].concat(args))}}]);return PubSub}(_hookies2.default.Hooks);exports.default=PubSub},{hookies:19}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isSandbox=exports.isGoverness=undefined;var _isObject=require("lodash/isObject");var _isObject2=_interopRequireDefault(_isObject);var _sandbox=require("../sandbox");var _headGoverness=require("../governesses/head-governess");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var isGoverness=exports.isGoverness=function isGoverness(obj){return(0,_isObject2.default)(obj)&&obj instanceof _headGoverness.HeadGoverness};var isSandbox=exports.isSandbox=function isSandbox(obj){return(0,_isObject2.default)(obj)&&obj instanceof _sandbox.Sandbox}},{"../governesses/head-governess":6,"../sandbox":14,"lodash/isObject":129}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var VERSION="0.2.0";exports.default=VERSION},{}],19:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],function(exports){root.Hookies=factory(root,exports)})}else if(typeof exports!=="undefined"){factory(root,exports)}else{root.Hookies=factory(root,{})}})(this,function(root,Hookies){"use strict";var previousHookies=root.Hookies;Hookies.VERSION="1.0.7";Hookies.noConflict=function(){root.Hookies=previousHookies;return this};var isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var isString=function(obj){return Object.prototype.toString.call(obj)==="[object String]"};var isFunction=function(obj){return Object.prototype.toString.call(obj)==="[object Function]"};if(typeof/./!=="function"){isFunction=function(obj){return typeof obj==="function"||false}}var isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};var exec=function(callback,context,sync,customAsyncMethod,args){if(isFunction(callback)){var deliver=function(){callback.apply(context,args)};if(sync===true){deliver()}else{(customAsyncMethod||setTimeout)(deliver,0)}}};Hookies.mixin=function(base,options){if(!isObject(base)){throw new Error("Base object must be an object. Got: "+base)}base.hookies=new Hookies.Hooks(base,options);return this};Hookies.Hooks=function(base,options){options=options||{};this.hooks={};this.hookiesBase=base||{};this.customAsyncMethod=options.customAsyncMethod||null};var validateEvent=function(event){if(!isString(event)){throw new Error("Event name must be a string. Got: "+event+".")}};Hookies.Hooks.prototype.on=function(event){var args=Array.prototype.slice.call(arguments,0),cb,base;args.shift();validateEvent(event);if(args.length===0||args.length>2){throw new Error("Wrong number of arguments.")}if(args.length===2){if(!isObject(args[0])){throw new Error("Second argument must be an object.")}base=args[0];args.shift()}if(!isFunction(args[0])){throw new Error((base?"Third":"Second")+" argument must be a function.")}cb={context:base||null,fn:args[0]};if(!isArray(this.hooks[event])){this.hooks[event]=[]}this.hooks[event].push(cb)};Hookies.Hooks.prototype.trigger=function(event){var args=Array.prototype.slice.call(arguments,0),base,i,cb,self=this,sync,events,eventsLength;if(isObject(event)){if(isString(event.name)){base=event.context;sync=event.sync;event=event.name}else{throw new Error("Event object must contain name.")}}args.shift();validateEvent(event);for(i=0,events=this.hooks[event]||[],eventsLength=events.length;i<eventsLength;i++){cb=events[i];if(isObject(cb)){exec.call(this,cb.fn,base||cb.context||self.hookiesBase,!!sync,self.customAsyncMethod,args)}}};Hookies.Hooks.prototype.off=function(event,callback){var eventHooks=this.hooks[event],index,i,eventsLength=isArray(eventHooks)?eventHooks.length:0,isNotEmptyEvents=eventsLength>0,fnArray=[];if(!isString(event)){throw new Error("Event must be a string")}if(!isFunction(callback)&&callback!==undefined){throw new Error("Callback must be a function")}if(isNotEmptyEvents&&isFunction(callback)){for(i=0;i<eventsLength;i++){fnArray.push(eventHooks[i].fn)}index=fnArray.indexOf(callback);if(index!==-1){return this.hooks[event].splice(index,1)&&1}return 0}return isNotEmptyEvents?(this.hooks[event]=[])&&eventsLength:0};Hookies.Hooks.prototype.offAll=function(){this.hooks={}};return Hookies})},{}],20:[function(require,module,exports){(function(global){var nativeCreate=require("./_nativeCreate");var objectProto=global.Object.prototype;function Hash(){}Hash.prototype=nativeCreate?nativeCreate(null):objectProto;module.exports=Hash}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_nativeCreate":99}],21:[function(require,module,exports){(function(global){var getNative=require("./_getNative");var Map=getNative(global,"Map");module.exports=Map}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_getNative":76}],22:[function(require,module,exports){var mapClear=require("./_mapClear"),mapDelete=require("./_mapDelete"),mapGet=require("./_mapGet"),mapHas=require("./_mapHas"),mapSet=require("./_mapSet");function MapCache(values){var index=-1,length=values?values.length:0;this.clear();while(++index<length){var entry=values[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapClear;MapCache.prototype["delete"]=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;module.exports=MapCache},{"./_mapClear":93,"./_mapDelete":94,"./_mapGet":95,"./_mapHas":96,"./_mapSet":97}],23:[function(require,module,exports){(function(global){var Reflect=global.Reflect;module.exports=Reflect}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],24:[function(require,module,exports){(function(global){var getNative=require("./_getNative");var Set=getNative(global,"Set");module.exports=Set}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_getNative":76}],25:[function(require,module,exports){var stackClear=require("./_stackClear"),stackDelete=require("./_stackDelete"),stackGet=require("./_stackGet"),stackHas=require("./_stackHas"),stackSet=require("./_stackSet");function Stack(values){var index=-1,length=values?values.length:0;this.clear();while(++index<length){var entry=values[index];this.set(entry[0],entry[1])}}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack},{"./_stackClear":102,"./_stackDelete":103,"./_stackGet":104,"./_stackHas":105,"./_stackSet":106}],26:[function(require,module,exports){(function(global){var Symbol=global.Symbol;module.exports=Symbol}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],27:[function(require,module,exports){(function(global){var Uint8Array=global.Uint8Array;module.exports=Uint8Array}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],28:[function(require,module,exports){function apply(func,thisArg,args){var length=args?args.length:0;switch(length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}module.exports=apply},{}],29:[function(require,module,exports){function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}module.exports=arrayEach},{}],30:[function(require,module,exports){function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value}}return result}module.exports=arrayFilter},{}],31:[function(require,module,exports){function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},{}],32:[function(require,module,exports){function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}module.exports=arraySome},{}],33:[function(require,module,exports){(function(global){var eq=require("./eq");var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!eq(objValue,value)||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)||value===undefined&&!(key in object)){object[key]=value}}module.exports=assignValue}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./eq":112}],34:[function(require,module,exports){(function(global){var assocIndexOf=require("./_assocIndexOf");var arrayProto=global.Array.prototype;var splice=arrayProto.splice;function assocDelete(array,key){var index=assocIndexOf(array,key);if(index<0){return false}var lastIndex=array.length-1;if(index==lastIndex){array.pop()}else{splice.call(array,index,1)}return true}module.exports=assocDelete}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_assocIndexOf":37}],35:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function assocGet(array,key){var index=assocIndexOf(array,key);return index<0?undefined:array[index][1]}module.exports=assocGet},{"./_assocIndexOf":37}],36:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function assocHas(array,key){return assocIndexOf(array,key)>-1}module.exports=assocHas},{"./_assocIndexOf":37}],37:[function(require,module,exports){var eq=require("./eq");function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},{"./eq":112}],38:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function assocSet(array,key,value){var index=assocIndexOf(array,key);if(index<0){array.push([key,value])}else{array[index][1]=value}}module.exports=assocSet},{"./_assocIndexOf":37}],39:[function(require,module,exports){var baseForOwn=require("./_baseForOwn"),createBaseEach=require("./_createBaseEach");var baseEach=createBaseEach(baseForOwn);module.exports=baseEach},{"./_baseForOwn":44,"./_createBaseEach":68}],40:[function(require,module,exports){var baseEach=require("./_baseEach");function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}module.exports=baseFilter;
},{"./_baseEach":39}],41:[function(require,module,exports){function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}});return result}module.exports=baseFind},{}],42:[function(require,module,exports){function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}module.exports=baseFindIndex},{}],43:[function(require,module,exports){var createBaseFor=require("./_createBaseFor");var baseFor=createBaseFor();module.exports=baseFor},{"./_createBaseFor":69}],44:[function(require,module,exports){var baseFor=require("./_baseFor"),keys=require("./keys");function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}module.exports=baseForOwn},{"./_baseFor":43,"./keys":136}],45:[function(require,module,exports){var baseToPath=require("./_baseToPath"),isKey=require("./_isKey");function baseGet(object,path){path=isKey(path,object)?[path+""]:baseToPath(path);var index=0,length=path.length;while(object!=null&&index<length){object=object[path[index++]]}return index&&index==length?object:undefined}module.exports=baseGet},{"./_baseToPath":63,"./_isKey":88}],46:[function(require,module,exports){(function(global){var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var getPrototypeOf=Object.getPrototypeOf;function baseHas(object,key){return hasOwnProperty.call(object,key)||typeof object=="object"&&key in object&&getPrototypeOf(object)===null}module.exports=baseHas}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],47:[function(require,module,exports){function baseHasIn(object,key){return key in Object(object)}module.exports=baseHasIn},{}],48:[function(require,module,exports){var indexOfNaN=require("./_indexOfNaN");function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}module.exports=baseIndexOf},{"./_indexOfNaN":84}],49:[function(require,module,exports){var baseIsEqualDeep=require("./_baseIsEqualDeep"),isObject=require("./isObject"),isObjectLike=require("./isObjectLike");function baseIsEqual(value,other,customizer,bitmask,stack){if(value===other){return true}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack)}module.exports=baseIsEqual},{"./_baseIsEqualDeep":50,"./isObject":129,"./isObjectLike":130}],50:[function(require,module,exports){(function(global){var Stack=require("./_Stack"),equalArrays=require("./_equalArrays"),equalByTag=require("./_equalByTag"),equalObjects=require("./_equalObjects"),getTag=require("./_getTag"),isArray=require("./isArray"),isHostObject=require("./_isHostObject"),isTypedArray=require("./isTypedArray");var PARTIAL_COMPARE_FLAG=2;var argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]";var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=getTag(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=getTag(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag,equalFunc,customizer,bitmask)}var isPartial=bitmask&PARTIAL_COMPARE_FLAG;if(!isPartial){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,bitmask,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,bitmask,stack)}module.exports=baseIsEqualDeep}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_Stack":25,"./_equalArrays":71,"./_equalByTag":72,"./_equalObjects":73,"./_getTag":77,"./_isHostObject":85,"./isArray":122,"./isTypedArray":134}],51:[function(require,module,exports){var Stack=require("./_Stack"),baseIsEqual=require("./_baseIsEqual");var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack,result=customizer?customizer(objValue,srcValue,key,object,source,stack):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result)){return false}}}return true}module.exports=baseIsMatch},{"./_Stack":25,"./_baseIsEqual":49}],52:[function(require,module,exports){var baseMatches=require("./_baseMatches"),baseMatchesProperty=require("./_baseMatchesProperty"),identity=require("./identity"),isArray=require("./isArray"),property=require("./property");function baseIteratee(value){var type=typeof value;if(type=="function"){return value}if(value==null){return identity}if(type=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}module.exports=baseIteratee},{"./_baseMatches":55,"./_baseMatchesProperty":56,"./identity":119,"./isArray":122,"./property":140}],53:[function(require,module,exports){var nativeKeys=Object.keys;function baseKeys(object){return nativeKeys(Object(object))}module.exports=baseKeys},{}],54:[function(require,module,exports){(function(global){var Reflect=require("./_Reflect"),iteratorToArray=require("./_iteratorToArray");var objectProto=global.Object.prototype;var enumerate=Reflect?Reflect.enumerate:undefined,propertyIsEnumerable=objectProto.propertyIsEnumerable;function baseKeysIn(object){object=object==null?object:Object(object);var result=[];for(var key in object){result.push(key)}return result}if(enumerate&&!propertyIsEnumerable.call({valueOf:1},"valueOf")){baseKeysIn=function(object){return iteratorToArray(enumerate(object))}}module.exports=baseKeysIn}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_Reflect":23,"./_iteratorToArray":92}],55:[function(require,module,exports){var baseIsMatch=require("./_baseIsMatch"),getMatchData=require("./_getMatchData");function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object==null){return false}return object[key]===value&&(value!==undefined||key in Object(object))}}return function(object){return object===source||baseIsMatch(object,source,matchData)}}module.exports=baseMatches},{"./_baseIsMatch":51,"./_getMatchData":75}],56:[function(require,module,exports){var baseIsEqual=require("./_baseIsEqual"),get=require("./get"),hasIn=require("./hasIn");var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;function baseMatchesProperty(path,srcValue){return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,undefined,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}module.exports=baseMatchesProperty},{"./_baseIsEqual":49,"./get":117,"./hasIn":118}],57:[function(require,module,exports){function baseProperty(key){return function(object){return object==null?undefined:object[key]}}module.exports=baseProperty},{}],58:[function(require,module,exports){var baseGet=require("./_baseGet");function basePropertyDeep(path){return function(object){return baseGet(object,path)}}module.exports=basePropertyDeep},{"./_baseGet":45}],59:[function(require,module,exports){function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}module.exports=baseSlice},{}],60:[function(require,module,exports){var baseEach=require("./_baseEach");function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}module.exports=baseSome},{"./_baseEach":39}],61:[function(require,module,exports){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}module.exports=baseTimes},{}],62:[function(require,module,exports){var arrayMap=require("./_arrayMap");function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}module.exports=baseToPairs},{"./_arrayMap":31}],63:[function(require,module,exports){var isArray=require("./isArray"),stringToPath=require("./_stringToPath");function baseToPath(value){return isArray(value)?value:stringToPath(value)}module.exports=baseToPath},{"./_stringToPath":108,"./isArray":122}],64:[function(require,module,exports){var arrayMap=require("./_arrayMap");function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}module.exports=baseValues},{"./_arrayMap":31}],65:[function(require,module,exports){var copyObjectWith=require("./_copyObjectWith");function copyObject(source,props,object){return copyObjectWith(source,props,object)}module.exports=copyObject},{"./_copyObjectWith":66}],66:[function(require,module,exports){var assignValue=require("./_assignValue");function copyObjectWith(source,props,object,customizer){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):source[key];assignValue(object,key,newValue)}return object}module.exports=copyObjectWith},{"./_assignValue":33}],67:[function(require,module,exports){var isIterateeCall=require("./_isIterateeCall"),rest=require("./rest");function createAssigner(assigner){return rest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}module.exports=createAssigner},{"./_isIterateeCall":87,"./rest":141}],68:[function(require,module,exports){var isArrayLike=require("./isArrayLike");function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}module.exports=createBaseEach},{"./isArrayLike":123}],69:[function(require,module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}module.exports=createBaseFor},{}],70:[function(require,module,exports){var stringToArray=require("./_stringToArray"),toString=require("./toString");var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsVarRange="\\ufe0e\\ufe0f";var rsZWJ="\\u200d";var reHasComplexSymbol=RegExp("["+rsZWJ+rsAstralRange+rsComboMarksRange+rsComboSymbolsRange+rsVarRange+"]");function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=reHasComplexSymbol.test(string)?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?strSymbols.slice(1).join(""):string.slice(1);return chr[methodName]()+trailing}}module.exports=createCaseFirst},{"./_stringToArray":107,"./toString":146}],71:[function(require,module,exports){var arraySome=require("./_arraySome");var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var index=-1,isPartial=bitmask&PARTIAL_COMPARE_FLAG,isUnordered=bitmask&UNORDERED_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked){return stacked==other}var result=true;stack.set(array,other);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(isUnordered){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack)})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack))){result=false;break}}stack["delete"](array);return result}module.exports=equalArrays},{"./_arraySome":32}],72:[function(require,module,exports){var Symbol=require("./_Symbol"),Uint8Array=require("./_Uint8Array"),mapToArray=require("./_mapToArray"),setToArray=require("./_setToArray");var UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2;var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]";var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=Symbol?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,equalFunc,customizer,bitmask){switch(tag){case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;convert||(convert=setToArray);return(isPartial||object.size==other.size)&&equalFunc(convert(object),convert(other),customizer,bitmask|UNORDERED_COMPARE_FLAG);case symbolTag:return!!Symbol&&symbolValueOf.call(object)==symbolValueOf.call(other)}return false}module.exports=equalByTag},{"./_Symbol":26,"./_Uint8Array":27,"./_mapToArray":98,"./_setToArray":101}],73:[function(require,module,exports){var baseHas=require("./_baseHas"),keys=require("./keys");var PARTIAL_COMPARE_FLAG=2;function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:baseHas(other,key))){return false}}var stacked=stack.get(object);if(stacked){return stacked==other}var result=true;stack.set(object,other);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);return result}module.exports=equalObjects},{"./_baseHas":46,"./keys":136}],74:[function(require,module,exports){var baseProperty=require("./_baseProperty");var getLength=baseProperty("length");module.exports=getLength},{"./_baseProperty":57}],75:[function(require,module,exports){var isStrictComparable=require("./_isStrictComparable"),toPairs=require("./toPairs");function getMatchData(object){var result=toPairs(object),length=result.length;while(length--){result[length][2]=isStrictComparable(result[length][1])}return result}module.exports=getMatchData},{"./_isStrictComparable":91,"./toPairs":145}],76:[function(require,module,exports){var isNative=require("./isNative");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}module.exports=getNative},{"./isNative":128}],77:[function(require,module,exports){(function(global){var Map=require("./_Map"),Set=require("./_Set");var mapTag="[object Map]",objectTag="[object Object]",setTag="[object Set]";var objectProto=global.Object.prototype;var funcToString=global.Function.prototype.toString;var objectToString=objectProto.toString;var mapCtorString=Map?funcToString.call(Map):"",setCtorString=Set?funcToString.call(Set):"";function getTag(value){return objectToString.call(value)}if(Map&&getTag(new Map)!=mapTag||Set&&getTag(new Set)!=setTag){getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:null,ctorString=typeof Ctor=="function"?funcToString.call(Ctor):"";if(ctorString){if(ctorString==mapCtorString){return mapTag}if(ctorString==setCtorString){return setTag}}return result}}module.exports=getTag}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_Map":21,"./_Set":24}],78:[function(require,module,exports){var baseToPath=require("./_baseToPath"),isArguments=require("./isArguments"),isArray=require("./isArray"),isIndex=require("./_isIndex"),isKey=require("./_isKey"),isLength=require("./isLength"),isString=require("./isString"),last=require("./last"),parent=require("./_parent");function hasPath(object,path,hasFunc){if(object==null){return false}var result=hasFunc(object,path);if(!result&&!isKey(path)){path=baseToPath(path);object=parent(object,path);if(object!=null){path=last(path);result=hasFunc(object,path)}}var length=object?object.length:undefined;return result||!!length&&isLength(length)&&isIndex(path,length)&&(isArray(object)||isString(object)||isArguments(object))}module.exports=hasPath},{"./_baseToPath":63,"./_isIndex":86,"./_isKey":88,"./_parent":100,"./isArguments":121,"./isArray":122,"./isLength":127,"./isString":132,"./last":138}],79:[function(require,module,exports){var hashHas=require("./_hashHas");function hashDelete(hash,key){return hashHas(hash,key)&&delete hash[key]}module.exports=hashDelete},{"./_hashHas":81}],80:[function(require,module,exports){(function(global){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(hash,key){if(nativeCreate){var result=hash[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(hash,key)?hash[key]:undefined}module.exports=hashGet}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_nativeCreate":99}],81:[function(require,module,exports){(function(global){var nativeCreate=require("./_nativeCreate");var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(hash,key){return nativeCreate?hash[key]!==undefined:hasOwnProperty.call(hash,key)}module.exports=hashHas}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_nativeCreate":99}],82:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(hash,key,value){hash[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value}module.exports=hashSet},{"./_nativeCreate":99}],83:[function(require,module,exports){var baseTimes=require("./_baseTimes"),isArguments=require("./isArguments"),isArray=require("./isArray"),isLength=require("./isLength"),isString=require("./isString");function indexKeys(object){var length=object?object.length:undefined;if(isLength(length)&&(isArray(object)||isString(object)||isArguments(object))){return baseTimes(length,String)}return null}module.exports=indexKeys},{"./_baseTimes":61,"./isArguments":121,"./isArray":122,"./isLength":127,"./isString":132}],84:[function(require,module,exports){function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}module.exports=indexOfNaN},{}],85:[function(require,module,exports){function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}module.exports=isHostObject},{}],86:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}module.exports=isIndex},{}],87:[function(require,module,exports){var eq=require("./eq"),isArrayLike=require("./isArrayLike"),isIndex=require("./_isIndex"),isObject=require("./isObject");function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}module.exports=isIterateeCall},{"./_isIndex":86,"./eq":112,"./isArrayLike":123,"./isObject":129}],88:[function(require,module,exports){var isArray=require("./isArray");var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(typeof value=="number"){return true}return!isArray(value)&&(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object))}module.exports=isKey},{"./isArray":122}],89:[function(require,module,exports){function isKeyable(value){var type=typeof value;return type=="number"||type=="boolean"||type=="string"&&value!=="__proto__"||value==null}module.exports=isKeyable},{}],90:[function(require,module,exports){(function(global){var objectProto=global.Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],91:[function(require,module,exports){var isObject=require("./isObject");function isStrictComparable(value){return value===value&&!isObject(value)}module.exports=isStrictComparable},{"./isObject":129}],92:[function(require,module,exports){function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done){result.push(data.value)}return result}module.exports=iteratorToArray},{}],93:[function(require,module,exports){var Hash=require("./_Hash"),Map=require("./_Map");function mapClear(){this.__data__={hash:new Hash,map:Map?new Map:[],string:new Hash}}module.exports=mapClear},{"./_Hash":20,"./_Map":21}],94:[function(require,module,exports){var Map=require("./_Map"),assocDelete=require("./_assocDelete"),hashDelete=require("./_hashDelete"),isKeyable=require("./_isKeyable");function mapDelete(key){var data=this.__data__;if(isKeyable(key)){return hashDelete(typeof key=="string"?data.string:data.hash,key)}return Map?data.map["delete"](key):assocDelete(data.map,key)}module.exports=mapDelete},{"./_Map":21,"./_assocDelete":34,"./_hashDelete":79,"./_isKeyable":89}],95:[function(require,module,exports){var Map=require("./_Map"),assocGet=require("./_assocGet"),hashGet=require("./_hashGet"),isKeyable=require("./_isKeyable");function mapGet(key){var data=this.__data__;if(isKeyable(key)){return hashGet(typeof key=="string"?data.string:data.hash,key)}return Map?data.map.get(key):assocGet(data.map,key)}module.exports=mapGet},{"./_Map":21,"./_assocGet":35,"./_hashGet":80,"./_isKeyable":89}],96:[function(require,module,exports){var Map=require("./_Map"),assocHas=require("./_assocHas"),hashHas=require("./_hashHas"),isKeyable=require("./_isKeyable");function mapHas(key){var data=this.__data__;if(isKeyable(key)){return hashHas(typeof key=="string"?data.string:data.hash,key)}return Map?data.map.has(key):assocHas(data.map,key)}module.exports=mapHas},{"./_Map":21,"./_assocHas":36,"./_hashHas":81,"./_isKeyable":89}],97:[function(require,module,exports){var Map=require("./_Map"),assocSet=require("./_assocSet"),hashSet=require("./_hashSet"),isKeyable=require("./_isKeyable");function mapSet(key,value){var data=this.__data__;if(isKeyable(key)){hashSet(typeof key=="string"?data.string:data.hash,key,value)}else if(Map){data.map.set(key,value)}else{assocSet(data.map,key,value)}return this}module.exports=mapSet},{"./_Map":21,"./_assocSet":38,"./_hashSet":82,"./_isKeyable":89}],98:[function(require,module,exports){function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}module.exports=mapToArray},{}],99:[function(require,module,exports){var getNative=require("./_getNative");var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},{"./_getNative":76}],100:[function(require,module,exports){var baseSlice=require("./_baseSlice"),get=require("./get");function parent(object,path){return path.length==1?object:get(object,baseSlice(path,0,-1))}module.exports=parent},{"./_baseSlice":59,"./get":117}],101:[function(require,module,exports){function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}module.exports=setToArray},{}],102:[function(require,module,exports){function stackClear(){this.__data__={array:[],map:null}}module.exports=stackClear},{}],103:[function(require,module,exports){var assocDelete=require("./_assocDelete");function stackDelete(key){var data=this.__data__,array=data.array;return array?assocDelete(array,key):data.map["delete"](key)}module.exports=stackDelete},{"./_assocDelete":34}],104:[function(require,module,exports){var assocGet=require("./_assocGet");function stackGet(key){var data=this.__data__,array=data.array;return array?assocGet(array,key):data.map.get(key)}module.exports=stackGet},{"./_assocGet":35}],105:[function(require,module,exports){var assocHas=require("./_assocHas");function stackHas(key){var data=this.__data__,array=data.array;return array?assocHas(array,key):data.map.has(key)}module.exports=stackHas},{"./_assocHas":36}],106:[function(require,module,exports){var MapCache=require("./_MapCache"),assocSet=require("./_assocSet");var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__,array=data.array;if(array){if(array.length<LARGE_ARRAY_SIZE-1){assocSet(array,key,value)}else{data.array=null;data.map=new MapCache(array)}}var map=data.map;if(map){map.set(key,value)}return this}module.exports=stackSet},{"./_MapCache":22,"./_assocSet":38}],107:[function(require,module,exports){var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsVarRange="\\ufe0e\\ufe0f";var rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboMarksRange+rsComboSymbolsRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d";var reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reComplexSymbol=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function stringToArray(string){return string.match(reComplexSymbol)}module.exports=stringToArray},{}],108:[function(require,module,exports){var toString=require("./toString");var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g;var reEscapeChar=/\\(\\)?/g;function stringToPath(string){var result=[];toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result}module.exports=stringToPath},{"./toString":146}],109:[function(require,module,exports){var identity=require("./identity");function toFunction(value){return typeof value=="function"?value:identity}module.exports=toFunction},{"./identity":119}],110:[function(require,module,exports){var copyObject=require("./_copyObject"),createAssigner=require("./_createAssigner"),keysIn=require("./keysIn");var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)});module.exports=assignIn},{"./_copyObject":65,"./_createAssigner":67,"./keysIn":137}],111:[function(require,module,exports){module.exports=require("./forEach")},{"./forEach":116}],112:[function(require,module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},{}],113:[function(require,module,exports){module.exports=require("./assignIn")},{"./assignIn":110}],114:[function(require,module,exports){var arrayFilter=require("./_arrayFilter"),baseFilter=require("./_baseFilter"),baseIteratee=require("./_baseIteratee"),isArray=require("./isArray");function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,baseIteratee(predicate,3))}module.exports=filter},{"./_arrayFilter":30,"./_baseFilter":40,"./_baseIteratee":52,"./isArray":122}],115:[function(require,module,exports){var baseEach=require("./_baseEach"),baseFind=require("./_baseFind"),baseFindIndex=require("./_baseFindIndex"),baseIteratee=require("./_baseIteratee"),isArray=require("./isArray");function find(collection,predicate){predicate=baseIteratee(predicate,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,baseEach)}module.exports=find},{"./_baseEach":39,"./_baseFind":41,"./_baseFindIndex":42,"./_baseIteratee":52,"./isArray":122}],116:[function(require,module,exports){var arrayEach=require("./_arrayEach"),baseEach=require("./_baseEach"),isArray=require("./isArray"),toFunction=require("./_toFunction");
function forEach(collection,iteratee){return typeof iteratee=="function"&&isArray(collection)?arrayEach(collection,iteratee):baseEach(collection,toFunction(iteratee))}module.exports=forEach},{"./_arrayEach":29,"./_baseEach":39,"./_toFunction":109,"./isArray":122}],117:[function(require,module,exports){var baseGet=require("./_baseGet");function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}module.exports=get},{"./_baseGet":45}],118:[function(require,module,exports){var baseHasIn=require("./_baseHasIn"),hasPath=require("./_hasPath");function hasIn(object,path){return hasPath(object,path,baseHasIn)}module.exports=hasIn},{"./_baseHasIn":47,"./_hasPath":78}],119:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],120:[function(require,module,exports){var baseIndexOf=require("./_baseIndexOf"),isArrayLike=require("./isArrayLike"),isString=require("./isString"),toInteger=require("./toInteger"),values=require("./values");var nativeMax=Math.max;function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0)}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}module.exports=includes},{"./_baseIndexOf":48,"./isArrayLike":123,"./isString":132,"./toInteger":143,"./values":148}],121:[function(require,module,exports){(function(global){var isArrayLikeObject=require("./isArrayLikeObject");var argsTag="[object Arguments]";var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var propertyIsEnumerable=objectProto.propertyIsEnumerable;function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}module.exports=isArguments}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./isArrayLikeObject":124}],122:[function(require,module,exports){var isArray=Array.isArray;module.exports=isArray},{}],123:[function(require,module,exports){var getLength=require("./_getLength"),isFunction=require("./isFunction"),isLength=require("./isLength");function isArrayLike(value){return value!=null&&!(typeof value=="function"&&isFunction(value))&&isLength(getLength(value))}module.exports=isArrayLike},{"./_getLength":74,"./isFunction":126,"./isLength":127}],124:[function(require,module,exports){var isArrayLike=require("./isArrayLike"),isObjectLike=require("./isObjectLike");function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}module.exports=isArrayLikeObject},{"./isArrayLike":123,"./isObjectLike":130}],125:[function(require,module,exports){(function(global){var isArguments=require("./isArguments"),isArray=require("./isArray"),isArrayLike=require("./isArrayLike"),isFunction=require("./isFunction"),isString=require("./isString");var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(value){if(isArrayLike(value)&&(isArray(value)||isString(value)||isFunction(value.splice)||isArguments(value))){return!value.length}for(var key in value){if(hasOwnProperty.call(value,key)){return false}}return true}module.exports=isEmpty}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./isArguments":121,"./isArray":122,"./isArrayLike":123,"./isFunction":126,"./isString":132}],126:[function(require,module,exports){(function(global){var isObject=require("./isObject");var funcTag="[object Function]",genTag="[object GeneratorFunction]";var objectProto=global.Object.prototype;var objectToString=objectProto.toString;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}module.exports=isFunction}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./isObject":129}],127:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],128:[function(require,module,exports){(function(global){var isFunction=require("./isFunction"),isHostObject=require("./_isHostObject"),isObjectLike=require("./isObjectLike");var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var objectProto=global.Object.prototype;var funcToString=global.Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(funcToString.call(value))}return isObjectLike(value)&&(isHostObject(value)?reIsNative:reIsHostCtor).test(value)}module.exports=isNative}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_isHostObject":85,"./isFunction":126,"./isObjectLike":130}],129:[function(require,module,exports){function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=isObject},{}],130:[function(require,module,exports){function isObjectLike(value){return!!value&&typeof value=="object"}module.exports=isObjectLike},{}],131:[function(require,module,exports){(function(global){var isObject=require("./isObject");var regexpTag="[object RegExp]";var objectProto=global.Object.prototype;var objectToString=objectProto.toString;function isRegExp(value){return isObject(value)&&objectToString.call(value)==regexpTag}module.exports=isRegExp}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./isObject":129}],132:[function(require,module,exports){(function(global){var isArray=require("./isArray"),isObjectLike=require("./isObjectLike");var stringTag="[object String]";var objectProto=global.Object.prototype;var objectToString=objectProto.toString;function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}module.exports=isString}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./isArray":122,"./isObjectLike":130}],133:[function(require,module,exports){(function(global){var isObjectLike=require("./isObjectLike");var symbolTag="[object Symbol]";var objectProto=global.Object.prototype;var objectToString=objectProto.toString;function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}module.exports=isSymbol}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./isObjectLike":130}],134:[function(require,module,exports){(function(global){var isLength=require("./isLength"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var objectProto=global.Object.prototype;var objectToString=objectProto.toString;function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}module.exports=isTypedArray}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./isLength":127,"./isObjectLike":130}],135:[function(require,module,exports){function isUndefined(value){return value===undefined}module.exports=isUndefined},{}],136:[function(require,module,exports){var baseHas=require("./_baseHas"),baseKeys=require("./_baseKeys"),indexKeys=require("./_indexKeys"),isArrayLike=require("./isArrayLike"),isIndex=require("./_isIndex"),isPrototype=require("./_isPrototype");function keys(object){var isProto=isPrototype(object);if(!(isProto||isArrayLike(object))){return baseKeys(object)}var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;for(var key in object){if(baseHas(object,key)&&!(skipIndexes&&(key=="length"||isIndex(key,length)))&&!(isProto&&key=="constructor")){result.push(key)}}return result}module.exports=keys},{"./_baseHas":46,"./_baseKeys":53,"./_indexKeys":83,"./_isIndex":86,"./_isPrototype":90,"./isArrayLike":123}],137:[function(require,module,exports){(function(global){var baseKeysIn=require("./_baseKeysIn"),indexKeys=require("./_indexKeys"),isIndex=require("./_isIndex"),isPrototype=require("./_isPrototype");var objectProto=global.Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function keysIn(object){var index=-1,isProto=isPrototype(object),props=baseKeysIn(object),propsLength=props.length,indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;while(++index<propsLength){var key=props[index];if(!(skipIndexes&&(key=="length"||isIndex(key,length)))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=keysIn}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./_baseKeysIn":54,"./_indexKeys":83,"./_isIndex":86,"./_isPrototype":90}],138:[function(require,module,exports){function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}module.exports=last},{}],139:[function(require,module,exports){var MapCache=require("./_MapCache");var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new memoize.Cache;return memoized}memoize.Cache=MapCache;module.exports=memoize},{"./_MapCache":22}],140:[function(require,module,exports){var baseProperty=require("./_baseProperty"),basePropertyDeep=require("./_basePropertyDeep"),isKey=require("./_isKey");function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}module.exports=property},{"./_baseProperty":57,"./_basePropertyDeep":58,"./_isKey":88}],141:[function(require,module,exports){var apply=require("./_apply"),toInteger=require("./toInteger");var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;function rest(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:toInteger(start),0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}switch(start){case 0:return func.call(this,array);case 1:return func.call(this,args[0],array);case 2:return func.call(this,args[0],args[1],array)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=array;return apply(func,this,otherArgs)}}module.exports=rest},{"./_apply":28,"./toInteger":143}],142:[function(require,module,exports){var arraySome=require("./_arraySome"),baseIteratee=require("./_baseIteratee"),baseSome=require("./_baseSome"),isArray=require("./isArray"),isIterateeCall=require("./_isIterateeCall");function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined}return func(collection,baseIteratee(predicate,3))}module.exports=some},{"./_arraySome":32,"./_baseIteratee":52,"./_baseSome":60,"./_isIterateeCall":87,"./isArray":122}],143:[function(require,module,exports){var toNumber=require("./toNumber");var INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308;function toInteger(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}var remainder=value%1;return value===value?remainder?value-remainder:value:0}module.exports=toInteger},{"./toNumber":144}],144:[function(require,module,exports){var isFunction=require("./isFunction"),isObject=require("./isObject");var NAN=0/0;var reTrim=/^\s+|\s+$/g;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(value){if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=toNumber},{"./isFunction":126,"./isObject":129}],145:[function(require,module,exports){var baseToPairs=require("./_baseToPairs"),keys=require("./keys");function toPairs(object){return baseToPairs(object,keys(object))}module.exports=toPairs},{"./_baseToPairs":62,"./keys":136}],146:[function(require,module,exports){var Symbol=require("./_Symbol"),isSymbol=require("./isSymbol");var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=Symbol?symbolProto.toString:undefined;function toString(value){if(typeof value=="string"){return value}if(value==null){return""}if(isSymbol(value)){return Symbol?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toString},{"./_Symbol":26,"./isSymbol":133}],147:[function(require,module,exports){var createCaseFirst=require("./_createCaseFirst");var upperFirst=createCaseFirst("toUpperCase");module.exports=upperFirst},{"./_createCaseFirst":70}],148:[function(require,module,exports){var baseValues=require("./_baseValues"),keys=require("./keys");function values(object){return object?baseValues(object,keys(object)):[]}module.exports=values},{"./_baseValues":64,"./keys":136}]},{},[1])(1)});